---
date: 2015-05-08
layout: post
title: 硬盘的结构和介绍
thread: 2015-07-25-hard_disk.md
categories: 计算机原理
tags: 硬盘
---


**一.物理结构**

1.磁道,扇区,柱面和磁头数

硬盘最基本的组成部分是由坚硬金属材料制成的涂以磁性介质的盘片,不同容量硬盘的盘片数不等.每个盘片有两面,都可记录信息.盘片被分成许多扇形的区域,每个区域叫一个扇区,每个扇区可存储128×2的N次方(N=0.1.2.3)字节信息.

在DOS中每扇区是128×2的2次方=512字节,盘片表面上以盘片中心为圆心,不同半径的同心圆称为磁道.硬盘中,不同盘片相同半径的磁道所组成的圆柱称为柱面.磁道与柱面都是表示不同半径的圆,在许多场合,磁道和柱面可以互换使用,我们知道,每个磁盘有两个面,每个面都有一个磁头,习惯用磁头号来区分.扇区,磁道(或柱面)和磁头数构成了硬盘结构的基本参数,由这些参数可以得到硬盘的容量,

计算公式为：

存储容量=磁头数×磁道(柱面)数×每道扇区数×每扇区字节数

2.簇

"簇"是硬盘上存储数据进行分配的最小单位.当创建一个很小的文件时,如是一个字节,则它在磁盘上并不是只占一个字节的空间,而是占有整个一簇.操作系统视不同的存储介质(如软盘,硬盘),不同容量的硬盘,簇的大小也不一样.簇的大小可在称为磁盘参数块(BPB)中获取.簇的概念仅适用于数据区.

**二.数据结构**

格式化好的硬盘,整个磁盘按所记录数据的作用不同可分为五部分：

主引导记录(MBR——Main Boot Record)

操作系统引导记录(OBR——OS Boot Record)

文件分配表(FAT——File Assign Table)

根目录(DIR——Directory)

数据区(DATA)

前5个重要信息在磁盘的外磁道上,原因是外圈周长总大于内圈周长,也即外圈存储密度要小些,可靠性高些.

其中只有主引导扇区是唯一的,其它的随你的分区数的增加而增加.

**三.引导扇区(Boot Sector)**

定义：通常指设备的第一个扇区,用于加载并转让处理器控制权给操作系统.

包括：主引导扇区、操作系统引导扇区

#####1.主引导扇区

位置：0柱面,0磁头,1扇区(clindyer 0,side 0,sector 1)

包括：主引导记录MBR(Main Boot Record)和分区表DPT(Disk Partition Table).

大小：512字节

其中：MBR 446字节(0000--01BD),DPT 64字节(01BE--01FD),结束标志2字节(55 AA)

功能：MBR通过检查DPT分区信息引导系统跳转至DBR

详情：

(1)主引导记录MBR(MBR)

功能：检查分区表是否正确以及确定哪个分区为引导分区,并在程序结束时把该分区的启动程序(也就是操作系统引导扇区)调入内存加以执行.

注意：MBR是由分区程序(例如DOS的Fdisk.exe)产生的,不同的操作系统可能这个扇区是不尽相同.如果你有这个意向也可以自己去编写一个,只要它能完成前述的任务即可,这也是为什么能实现多系统启动的原因(说句题外话:正因为这个主引导记录容易编写,所以才出现了很多的引导区病毒).

(2)硬盘分区表(DPT)

大小:总共64字节(01BE--01FD)

每个分区占16个字节,所以可以表示四个分区,这也就是为什么一个磁盘的主分区和扩展分区之和总共只能有四个的原因.

详情：

扩展分区的信息位于以上所示的硬盘分区表(DPT)中,而逻辑驱"动器的信息则位于扩展分区的起始扇区,即该分区的起始地址(面/扇区/磁道)所对应的扇区,该扇区中的信息与硬盘主引导扇区的区别是不包含MBR,而16字节的分区信息则表示的是逻辑驱动器的起始和结束地址等.

2.操作系统引导扇区——活动分区主引导扇区(DBR)

位置：通常位于硬盘的0磁道1柱面1扇区(clindyer 0,side 1,sector 1)

(这是对于DOS来说的,对于那些以多重引导方式启动的系统则位于相应的主分区/扩展分区的第一个扇区)

功能：包含机器CMOS等信息(0000--0059),核对该信息并引导指定的系统文件,如NTLDR等.

介绍：是操作系统可直接访问的第一个扇区,它也包括一个引导程序和一个被称为BPB(BIOS ParameterBlock)的本分区参数记录表.

详情：其实每个逻辑分区都有一个OBR,其参数视分区的大小、操作系统的类别而有所不同.引导程序的主要任务是判断本分区根目录前两个文件是否为操作系统的引导文件(例如MSDOS或者起源于MSDOS的Win9x/Me的IO.SYS和MSDOS.SYS).如是,就把第一个文件读入内存,并把控制权交予该文件.BPB参数块记录着本分区的起始扇区、结束扇区、文件存储格式、硬盘介质描述符、根目录大小、FAT个数、分配单元(Allocation Unit,以前也称之为簇)的大小等重要参数.OBR由高级格式化程序产生(例如DOS的Format).
